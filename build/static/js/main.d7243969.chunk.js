(this.webpackJsonpanalyze=this.webpackJsonpanalyze||[]).push([[0],{16:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),o=a(6),s=a.n(o),r=(a(16),a(3)),c=a.n(r),l=a(10),d=a(5),u=a(7),m=a(8),h=a(1),p=a(11),f=a(9),j=(a(18),a(0)),b=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={method:"date",primary_param:"",locations:[],filter:{location:""},last_update:"",version:"",outdated_version:-1,newest_version:"",debug:new URLSearchParams(window.location.search).has("debug"),data:[],filtered_data:[],dining_dollars:-1,holidays:[{holiday:"winter_break",start:new Date(2021,11,19,0,0,0,0),end:new Date(2022,0,1,0,0,0,0)},{holiday:"mlk_jr_day",start:new Date(2021,0,18,0,0,0,0),end:new Date(2022,0,18,0,0,0,0)},{holiday:"presidents_day",start:new Date(2021,1,15,0,0,0,0),end:new Date(2022,1,15,0,0,0,0)},{holiday:"cesar_chavez_day",start:new Date(2021,2,26,0,0,0,0),end:new Date(2022,2,26,0,0,0,0)}]},n.sortBy=n.sortBy.bind(Object(h.a)(n)),n.onLocationFilterChange=n.onLocationFilterChange.bind(Object(h.a)(n)),n.applyFilter=n.applyFilter.bind(Object(h.a)(n)),n.spentDateDining=n.spentDateDining.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,a,n,i,o,s,r,u,m,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,!this.state.debug){e.next=19;break}for(a=[],n="99.99.99",o="Debug Season",s=0,r=i=[{account:"Dining Dollars",amount:12.59,date:"2021-11-29T18:35:00.000Z",id:"213a772c-56ac-4125-9e33-f17261b018f2",location:"HDH Seventh Market Seventh Market 3",time:"10:35 AM",type:"Debit"},{account:"Triton Cash",amount:1,date:"2021-11-27T16:50:00.000Z",id:"49bbd629-3e8c-44db-b8fb-1cc005a1ee00",location:"Laundry Village Building 3 Left",time:"8:50 AM",type:"Debit"},{account:"Triton Cash",amount:1,date:"2021-11-27T16:50:00.000Z",id:"4cb1eaf7-3f05-4f07-8023-d77029f25743",location:"Laundry Village Building 3 Left",time:"8:50 AM",type:"Debit"}];s<r.length;s++)u=r[s],a.includes(u.location)||a.push(u.location);return e.prev=7,e.next=10,fetch("https://raw.githubusercontent.com/waymondrang/budget-buddy/main/manifest.json").then((function(e){return e.json()}));case 10:h=e.sent,m=h.version,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.log(e.t0);case 17:return t.setState({data:i,version:n,newest_version:m,outdated_version:m&&n?+n.replace(/[^0-9]/gm,"")<+m.replace(/[^0-9]/gm,"")?1:+n.replace(/[^0-9]/gm,"")===+m.replace(/[^0-9]/gm,"")?2:3:0,filtered_data:i,last_update:o,locations:a.sort((function(e,t){return e.localeCompare(t)})),dining_dollars:i.filter((function(e){return"credit"===e.type.toLowerCase()&&"dining dollars"===e.account.toLowerCase()})).reduce((function(e,t){return e+t.amount}),0)-i.filter((function(e){return"debit"===e.type.toLowerCase()&&"dining dollars"===e.account.toLowerCase()})).reduce((function(e,t){return+(e+t.amount).toFixed(2)}),0)}),e.abrupt("return");case 19:try{window.chrome.storage.local.get(["data","last_update"],function(){var e=Object(d.a)(c.a.mark((function e(a){var n,i,o,s,r,d,u,m,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.data,i=a.last_update,o=window.chrome.runtime.getManifest().version,n){e.next=6;break}return console.log("no data found!"),e.abrupt("return");case 6:return e.prev=6,e.next=9,fetch("https://raw.githubusercontent.com/waymondrang/budget-buddy/main/manifest.json").then((function(e){return e.json()}));case 9:r=e.sent,s=r.version,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:d=[],u=Object(l.a)(n);try{for(u.s();!(m=u.n()).done;)h=m.value,d.includes(h.location)||d.push(h.location)}catch(c){u.e(c)}finally{u.f()}t.setState({data:n,version:o,newest_version:s,outdated_version:s&&o?+o.replace(/[^0-9]/gm,"")<+s.replace(/[^0-9]/gm,"")?1:+o.replace(/[^0-9]/gm,"")===+s.replace(/[^0-9]/gm,"")?2:3:0,filtered_data:n,last_update:i,locations:d.sort((function(e,t){return e.localeCompare(t)})),dining_dollars:n.filter((function(e){return"credit"===e.type.toLowerCase()&&"dining dollars"===e.account.toLowerCase()})).reduce((function(e,t){return e+t.amount}),0)-n.filter((function(e){return"debit"===e.type.toLowerCase()&&"dining dollars"===e.account.toLowerCase()})).reduce((function(e,t){return+(e+t.amount).toFixed(2)}),0)});case 20:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}())}catch(p){console.log(p)}case 20:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"sortBy",value:function(e,t){var a=this.state.primary_param,n=this.state.filtered_data;if(e.shiftKey&&(console.log("ctrl click registered to method",t,"condition",t===this.state.primary_param),t===this.state.primary_param?(a="",this.setState({primary_param:""})):(a=t,this.setState({primary_param:t}))),"amount"===t){var i=n.sort((function(e,t){if("time"===a)var n=new Date(Date.parse(e.date)),i=new Date(Date.parse(t.date));return"date"===a?Date.parse(t.date)-Date.parse(e.date)||t.amount-e.amount:"time"===a?(n-60*n.getTimezoneOffset()*1e3)%864e5-(i-60*i.getTimezoneOffset()*1e3)%864e5||t.amount-e.amount:"account"===a?e.account.localeCompare(t.account)||t.amount-e.amount:"location"===a?e.location.localeCompare(t.location)||t.amount-e.amount:"type"===a&&e.type.localeCompare(t.type)||t.amount-e.amount}));this.setState({filtered_data:i,method:t})}else if("date"===t){i=n.sort((function(e,t){if("time"===a)var n=new Date(Date.parse(e.date)),i=new Date(Date.parse(t.date));return"amount"===a?t.amount-e.amount||Date.parse(t.date)-Date.parse(e.date):"time"===a?(n-60*n.getTimezoneOffset()*1e3)%864e5-(i-60*i.getTimezoneOffset()*1e3)%864e5||Date.parse(t.date)-Date.parse(e.date):"account"===a?e.account.localeCompare(t.account)||Date.parse(t.date)-Date.parse(e.date):"location"===a?e.location.localeCompare(t.location)||Date.parse(t.date)-Date.parse(e.date):"type"===a&&e.type.localeCompare(t.type)||Date.parse(t.date)-Date.parse(e.date)}));this.setState({filtered_data:i,method:t})}else if("time"===t){i=n.sort((function(e,t){var n=new Date(Date.parse(e.date)),i=new Date(Date.parse(t.date));return"amount"===a?t.amount-e.amount||(n-60*n.getTimezoneOffset()*1e3)%864e5-(i-60*i.getTimezoneOffset()*1e3)%864e5:"date"===a?Date.parse(t.date)-Date.parse(e.date)||(n-60*n.getTimezoneOffset()*1e3)%864e5-(i-60*i.getTimezoneOffset()*1e3)%864e5:"account"===a?e.account.localeCompare(t.account)||(n-60*n.getTimezoneOffset()*1e3)%864e5-(i-60*i.getTimezoneOffset()*1e3)%864e5:"location"===a?e.location.localeCompare(t.location)||(n-60*n.getTimezoneOffset()*1e3)%864e5-(i-60*i.getTimezoneOffset()*1e3)%864e5:"type"===a&&e.type.localeCompare(t.type)||(n-60*n.getTimezoneOffset()*1e3)%864e5-(i-60*i.getTimezoneOffset()*1e3)%864e5}));this.setState({filtered_data:i,method:t})}else if("account"===t){i=n.sort((function(e,t){if("time"===a)var n=new Date(Date.parse(e.date)),i=new Date(Date.parse(t.date));return"amount"===a?t.amount-e.amount||e.account.localeCompare(t.account):"time"===a?(n-60*n.getTimezoneOffset()*1e3)%864e5-(i-60*i.getTimezoneOffset()*1e3)%864e5||e.account.localeCompare(t.account):"date"===a?Date.parse(t.date)-Date.parse(e.date)||e.account.localeCompare(t.account):"location"===a?e.location.localeCompare(t.location)||e.account.localeCompare(t.account):"type"===a&&e.type.localeCompare(t.type)||e.account.localeCompare(t.account)}));this.setState({filtered_data:i,method:t})}else if("location"===t){i=n.sort((function(e,t){if("time"===a)var n=new Date(Date.parse(e.date)),i=new Date(Date.parse(t.date));return"amount"===a?t.amount-e.amount||e.location.localeCompare(t.location):"time"===a?(n-60*n.getTimezoneOffset()*1e3)%864e5-(i-60*i.getTimezoneOffset()*1e3)%864e5||e.location.localeCompare(t.location):"date"===a?Date.parse(t.date)-Date.parse(e.date)||e.account.localeCompare(t.account):"account"===a?e.account.localeCompare(t.account)||e.location.localeCompare(t.location):"type"===a&&e.type.localeCompare(t.type)||e.location.localeCompare(t.location)}));this.setState({filtered_data:i,method:t})}else if("type"===t){i=n.sort((function(e,t){if("time"===a)var n=new Date(Date.parse(e.date)),i=new Date(Date.parse(t.date));return"amount"===a?t.amount-e.amount||e.type.localeCompare(t.type):"time"===a?(n-60*n.getTimezoneOffset()*1e3)%864e5-(i-60*i.getTimezoneOffset()*1e3)%864e5||e.type.localeCompare(t.type):"date"===a?Date.parse(t.date)-Date.parse(e.date)||e.type.localeCompare(t.type):"location"===a?e.location.localeCompare(t.location)||e.type.localeCompare(t.type):"account"===a&&e.account.localeCompare(t.account)||e.type.localeCompare(t.type)}));this.setState({filtered_data:i,method:t})}console.log("primary parameter",a)}},{key:"onLocationFilterChange",value:function(e){var t=this.state.filter,a=e.target.value;if(t.location=a,"bb_all_locations"===a)this.setState({filtered_data:this.state.data,filter:t});else{var n=this.state.data.filter((function(e){return e.location===a}));this.setState({filtered_data:n,filter:t})}}},{key:"applyFilter",value:function(e){var t=this;if(console.log("applying filter",this.state.filter),this.state.filter.location)if("bb_all_locations"===this.state.filter.location)this.setState({filtered_data:this.state.data});else{var a=this.state.data.filter((function(e){return e.location===t.state.filter.location}));this.setState({filtered_data:a})}}},{key:"daysLeft",value:function(){var e=new Date;e.setHours(0,0,0,0);var t=new Date(2022,5,11,0,0,0,0);return Math.round(Math.abs(t-e)/864e5)}},{key:"daysPast",value:function(){var e=new Date;e.setHours(0,0,0,0);var t=new Date(2021,8,20,0,0,0,0);return Math.round(Math.abs(t-e)/864e5)}},{key:"spentDateDining",value:function(e,t){if(this.state.data.length){var a=new Date(e);a.setHours(0,0,0,0);var n=new Date(t);return n.setHours(23,59,59,999),+this.state.data.filter((function(e){return"debit"===e.type.toLowerCase()&&"dining dollars"===e.account.toLowerCase()&&new Date(e.date).valueOf()>a.valueOf()&&new Date(e.date).valueOf()<n.valueOf()})).reduce((function(e,t){return e+t.amount}),0).toFixed(2)}}},{key:"render",value:function(){var e=this,t=this.state.filtered_data;return Object(j.jsxs)("div",{id:"main",children:[Object(j.jsxs)("section",{children:[Object(j.jsxs)("h1",{id:"title",children:["Budget Buddy Analyzer",this.state.debug?" Debug Mode":null," v",this.state.version]}),Object(j.jsxs)("p",{children:["Shift + Click on a header field to set it as the primary sort parameter. ",-1===this.state.outdated_version?"Checking for latest version.":1===this.state.outdated_version?"A newer version (v".concat(this.state.newest_version,") is available!"):2===this.state.outdated_version?"You are running the latest version!":3===this.state.outdated_version?"You are running a preview build!":"Unable to check for updates."]}),Object(j.jsxs)("div",{className:"options",children:[Object(j.jsxs)("select",{className:"option",value:this.state.filter.location,onChange:this.onLocationFilterChange,children:[Object(j.jsx)("option",{value:"",disabled:!0,children:"Select Location"},"bb_default"),Object(j.jsx)("option",{value:"bb_all_locations",children:"All Locations"},"bb_all_locations"),this.state.locations.map((function(e){return Object(j.jsx)("option",{value:e,children:e},e)}))]}),Object(j.jsx)("button",{className:"option",onClick:this.applyFilter,children:"Filter"})]}),Object(j.jsx)("div",{className:"table_container",children:Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{className:"table_header",children:[Object(j.jsx)("th",{className:"location"===this.state.method&&"location"===this.state.primary_param?"selected primary":"location"===this.state.primary_param?"primary":"location"===this.state.method?"selected":null,onClick:function(t){return e.sortBy(t,"location")},children:"Location"}),Object(j.jsx)("th",{className:"amount"===this.state.method&&"amount"===this.state.primary_param?"selected primary":"amount"===this.state.primary_param?"primary":"amount"===this.state.method?"selected":null,onClick:function(t){return e.sortBy(t,"amount")},children:"Amount"}),Object(j.jsx)("th",{className:"account"===this.state.method&&"account"===this.state.primary_param?"selected primary":"account"===this.state.primary_param?"primary":"account"===this.state.method?"selected":null,onClick:function(t){return e.sortBy(t,"account")},children:"Account"}),Object(j.jsx)("th",{className:"date"===this.state.method&&"date"===this.state.primary_param?"selected primary":"date"===this.state.primary_param?"primary":"date"===this.state.method?"selected":null,onClick:function(t){return e.sortBy(t,"date")},children:"Date"}),Object(j.jsx)("th",{className:("date"===this.state.method&&"date"===this.state.primary_param?"selected primary":"date"===this.state.primary_param?"primary":"date"===this.state.method?"selected":null)||("time"===this.state.method&&"time"===this.state.primary_param?"selected primary":"time"===this.state.primary_param?"primary":"time"===this.state.method?"selected":null),onClick:function(t){return e.sortBy(t,"time")},children:"Time"}),Object(j.jsx)("th",{className:"type"===this.state.method&&"type"===this.state.primary_param?"selected primary":"type"===this.state.primary_param?"primary":"type"===this.state.method?"selected":null,onClick:function(t){return e.sortBy(t,"type")},children:"Type"})]})}),Object(j.jsx)("tbody",{children:this.state.filtered_data.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.location}),Object(j.jsxs)("td",{children:["$",e.amount]}),Object(j.jsx)("td",{children:e.account}),Object(j.jsx)("td",{children:new Date(Date.parse(e.date)).toLocaleDateString()}),Object(j.jsx)("td",{children:new Date(Date.parse(e.date)).toLocaleTimeString()}),Object(j.jsx)("td",{children:e.type})]},e.id)}))})]})}),Object(j.jsx)("div",{className:"totals_table",children:Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{className:"totals_table_head",children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Total"}),Object(j.jsx)("th",{children:"Dining Dollars"}),Object(j.jsx)("th",{children:"Triton Cash"}),Object(j.jsx)("th",{children:"Triton2Go Dining Dollars"})]})}),Object(j.jsx)("tbody",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{}),Object(j.jsxs)("td",{children:["$",t.filter((function(e){return"credit"===e.type.toLowerCase()&&"Dining Dollars"===e.account})).reduce((function(e,t){return e+t.amount}),0)-t.filter((function(e){return"debit"===e.type.toLowerCase()&&"Dining Dollars"===e.account})).reduce((function(e,t){return+(e+t.amount).toFixed(2)}),0)]}),Object(j.jsxs)("td",{children:["$",t.filter((function(e){return"credit"===e.type.toLowerCase()&&"Triton Cash"===e.account})).reduce((function(e,t){return e+t.amount}),0)-t.filter((function(e){return"debit"===e.type.toLowerCase()&&"Triton Cash"===e.account})).reduce((function(e,t){return+(e+t.amount).toFixed(2)}),0)]}),Object(j.jsxs)("td",{children:["$",t.filter((function(e){return"credit"===e.type.toLowerCase()&&"Triton2Go Dining Dollars"===e.account})).reduce((function(e,t){return e+t.amount}),0)-t.filter((function(e){return"debit"===e.type.toLowerCase()&&"Triton2Go Dining Dollars"===e.account})).reduce((function(e,t){return+(e+t.amount).toFixed(2)}),0)]})]})})]})}),Object(j.jsxs)("div",{className:"footer",children:[Object(j.jsxs)("div",{className:"footer_container",children:[Object(j.jsxs)("p",{children:["Last Update: ",this.state.last_update]}),Object(j.jsx)("a",{className:"update_button",href:"https://eacct-ucsd-sp.transactcampus.com/eAccounts/AccountTransaction.aspx",children:Object(j.jsx)("button",{children:"Update Data"})})]}),Object(j.jsxs)("p",{children:[this.state.filtered_data.length," ",1!==this.state.filtered_data.length?"Transactions":"Transaction"]})]})]}),Object(j.jsx)("hr",{}),Object(j.jsxs)("section",{children:[Object(j.jsx)("h1",{children:"Dining Dollars"}),Object(j.jsxs)("div",{className:"info_card_container",children:[Object(j.jsx)("div",{className:"info_card",children:Object(j.jsxs)("div",{className:"info_card_content",children:[Object(j.jsx)("p",{className:"info_title",children:"Current Balance"}),Object(j.jsxs)("span",{className:"info_body",children:["$",this.state.dining_dollars]})]})}),Object(j.jsx)("div",{className:"info_card",children:Object(j.jsxs)("div",{className:"info_card_content",children:[Object(j.jsx)("p",{className:"info_title",children:"Spent"}),Object(j.jsxs)("span",{className:"info_body",children:["$",this.spentDateDining(new Date(2021,8),new Date)]})]})}),Object(j.jsx)("div",{className:"info_card",children:Object(j.jsxs)("div",{className:"info_card_content",children:[Object(j.jsx)("p",{className:"info_title",children:"Allowance/Day"}),Object(j.jsxs)("span",{className:"info_body",children:["$",+(this.state.dining_dollars/this.daysLeft()).toFixed(2)]})]})}),Object(j.jsx)("div",{className:"info_card",children:Object(j.jsxs)("div",{className:"info_card_content",children:[Object(j.jsx)("p",{className:"info_title",children:"Spent Today"}),Object(j.jsxs)("span",{className:"info_body",children:["$",this.spentDateDining(new Date,new Date)]})]})}),Object(j.jsx)("div",{className:"info_card",children:Object(j.jsxs)("div",{className:"info_card_content",children:[Object(j.jsx)("p",{className:"info_title",children:"Spent Yesterday"}),Object(j.jsxs)("span",{className:"info_body",children:["$",this.spentDateDining(new Date-864e5,new Date-864e5)]})]})}),Object(j.jsx)("div",{className:"info_card",children:Object(j.jsxs)("div",{className:"info_card_content",children:[Object(j.jsx)("p",{className:"info_title",children:"Spent/Day"}),Object(j.jsxs)("span",{className:"info_body",children:["$",+(this.spentDateDining(new Date(2021,8),new Date)/this.daysPast()).toFixed(2)]})]})}),Object(j.jsx)("div",{className:"info_card",children:Object(j.jsxs)("div",{className:"info_card_content",children:[Object(j.jsx)("p",{className:"info_title",children:"Days Left"}),Object(j.jsx)("span",{className:"info_body",children:this.daysLeft()})]})}),Object(j.jsx)("div",{className:"info_card",children:Object(j.jsxs)("div",{className:"info_card_content",children:[Object(j.jsx)("p",{className:"info_title",children:"Days Past"}),Object(j.jsx)("span",{className:"info_body",children:this.daysPast()})]})})]})]})]})}}]),a}(i.a.Component),y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,21)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;a(e),n(e),i(e),o(e),s(e)}))};s.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(b,{})}),document.getElementById("root")),y()}},[[20,1,2]]]);
//# sourceMappingURL=main.d7243969.chunk.js.map