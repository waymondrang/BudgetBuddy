(this.webpackJsonpanalyze=this.webpackJsonpanalyze||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),i=a(4),r=a.n(i),c=(a(14),a(8)),s=a(5),l=a(6),d=a(1),u=a(9),m=a(7),p=(a(15),a(0)),h=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={method:"date",primary_param:"",locations:[],filter:{location:""},last_update:"",version:"",debug:new URLSearchParams(window.location.search).has("debug"),data:[],filtered_data:[],dining_dollars:-1},n.sortBy=n.sortBy.bind(Object(d.a)(n)),n.onLocationFilterChange=n.onLocationFilterChange.bind(Object(d.a)(n)),n.applyFilter=n.applyFilter.bind(Object(d.a)(n)),n.spentTodayDining=n.spentTodayDining.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.state.debug){for(var t=[],a=[{account:"Dining Dollars",amount:12.59,date:"2021-11-29T18:35:00.000Z",id:"17904c9c-c3cd-41dd-abe4-fb96aabbad31",location:"HDH Seventh Market Seventh Market 3",time:"10:35 AM",type:"Debit"},{account:"Triton Cash",amount:1,date:"2021-11-27T16:50:00.000Z",id:"2632cf59-8dfb-42da-b5bb-df051a9b60d3",location:"Laundry Village Building 3 Left",time:"8:50 AM",type:"Debit"},{account:"Triton Cash",amount:1,date:"2021-11-27T16:50:00.000Z",id:"8a5db0c2-3cd9-4792-b62d-6746fc29a2f4",location:"Laundry Village Building 3 Left",time:"8:50 AM",type:"Debit"},{account:"Triton Cash",amount:1,date:"2021-10-13T05:40:00.000Z",id:"5ca5227d-9632-402f-ac68-52564bdbe501",location:"Laundry Village Building 3 Left",time:"10:40 PM",type:"Debit"},{account:"Triton Cash",amount:1.25,date:"2021-10-13T04:45:00.000Z",id:"03dec4da-144c-486d-845f-d72011774b49",location:"Laundry Village Building 3 Left",time:"9:45 PM",type:"Debit"},{account:"Dining Dollars",amount:8.5,date:"2021-10-12T19:02:00.000Z",id:"f478d354-cf3f-4cab-b7d2-a2176f71f133",location:"HDH Oceanview Terrace OVT Scholars Pizza Mobile",time:"12:02 PM",type:"Debit"},{account:"Dining Dollars",amount:1.5,date:"2021-10-12T01:02:00.000Z",id:"47daaea4-b1fc-4cce-8560-0014715def2d",location:"HDH Cafe Ventanas Cafe V Worlds Fare Mobile Ord",time:"6:02 PM",type:"Debit"},{account:"Triton Cash",amount:12.17,date:"2021-10-11T02:59:00.000Z",id:"6de7dd19-9364-4a54-8ce6-0cc25211c06c",location:"Whole Foods Whole Foods 3",time:"7:59 PM",type:"Debit"},{account:"Dining Dollars",amount:9.5,date:"2021-09-19T00:42:00.000Z",id:"664c47d7-958a-4e02-b42e-011aeff62719",location:"HDH North Torrey Pines NTP Wolftown Mobile Ordering",time:"5:42 PM",type:"Debit"},{account:"Dining Dollars",amount:9.5,date:"2021-09-18T01:19:00.000Z",id:"2544ae02-3f5f-4e6f-a75e-f2816a247a17",location:"HDH Oceanview Terrace OVT Scholars Pizza Mobile",time:"6:19 PM",type:"Debit"},{account:"Dining Dollars",amount:3749,date:"2021-09-10T17:47:00.000Z",id:"e67ef4a6-3c5d-4f05-90da-f45f9a00a365",location:"Triton Card Accounts Services HDH-R-APP-AD",time:"10:47 AM",type:"Credit"}],n=0,o=a;n<o.length;n++){var i=o[n];t.includes(i.location)||t.push(i.location)}e.setState({data:a,version:"Debug",filtered_data:a,last_update:"Debug Season",locations:t.sort((function(e,t){return e.localeCompare(t)})),dining_dollars:a.filter((function(e){return"credit"===e.type.toLowerCase()&&"dining dollars"===e.account.toLowerCase()})).reduce((function(e,t){return e+t.amount}),0)-a.filter((function(e){return"debit"===e.type.toLowerCase()&&"dining dollars"===e.account.toLowerCase()})).reduce((function(e,t){return+(e+t.amount).toFixed(2)}),0)})}else try{window.chrome.storage.local.get(["data","last_update"],(function(t){var a=t.data,n=t.last_update,o=window.chrome.runtime.getManifest().version;if(a){var i,r=[],s=Object(c.a)(a);try{for(s.s();!(i=s.n()).done;){var l=i.value;r.includes(l.location)||r.push(l.location)}}catch(d){s.e(d)}finally{s.f()}e.setState({data:a,version:o,filtered_data:a,last_update:n,locations:r.sort((function(e,t){return e.localeCompare(t)})),dining_dollars:a.filter((function(e){return"credit"===e.type.toLowerCase()&&"dining dollars"===e.account.toLowerCase()})).reduce((function(e,t){return e+t.amount}),0)-a.filter((function(e){return"debit"===e.type.toLowerCase()&&"dining dollars"===e.account.toLowerCase()})).reduce((function(e,t){return+(e+t.amount).toFixed(2)}),0)})}else console.log("no data found!")}))}catch(r){console.log(r)}}},{key:"sortBy",value:function(e,t){var a=this.state.primary_param,n=this.state.filtered_data;if(e.ctrlKey&&(console.log("ctrl click registered to method",t,"condition",t===this.state.primary_param),t===this.state.primary_param?(a="",this.setState({primary_param:""})):(a=t,this.setState({primary_param:t}))),"amount"===t){var o=n.sort((function(e,t){if("time"===a)var n=new Date(Date.parse(e.date)),o=new Date(Date.parse(t.date));return"date"===a?Date.parse(t.date)-Date.parse(e.date)||t.amount-e.amount:"time"===a?(n-60*n.getTimezoneOffset()*1e3)%864e5-(o-60*o.getTimezoneOffset()*1e3)%864e5||t.amount-e.amount:"account"===a?e.account.localeCompare(t.account)||t.amount-e.amount:"location"===a?e.location.localeCompare(t.location)||t.amount-e.amount:"type"===a&&e.type.localeCompare(t.type)||t.amount-e.amount}));this.setState({filtered_data:o,method:t})}else if("date"===t){o=n.sort((function(e,t){if("time"===a)var n=new Date(Date.parse(e.date)),o=new Date(Date.parse(t.date));return"amount"===a?t.amount-e.amount||Date.parse(t.date)-Date.parse(e.date):"time"===a?(n-60*n.getTimezoneOffset()*1e3)%864e5-(o-60*o.getTimezoneOffset()*1e3)%864e5||Date.parse(t.date)-Date.parse(e.date):"account"===a?e.account.localeCompare(t.account)||Date.parse(t.date)-Date.parse(e.date):"location"===a?e.location.localeCompare(t.location)||Date.parse(t.date)-Date.parse(e.date):"type"===a&&e.type.localeCompare(t.type)||Date.parse(t.date)-Date.parse(e.date)}));this.setState({filtered_data:o,method:t})}else if("time"===t){o=n.sort((function(e,t){var n=new Date(Date.parse(e.date)),o=new Date(Date.parse(t.date));return"amount"===a?t.amount-e.amount||(n-60*n.getTimezoneOffset()*1e3)%864e5-(o-60*o.getTimezoneOffset()*1e3)%864e5:"date"===a?Date.parse(t.date)-Date.parse(e.date)||(n-60*n.getTimezoneOffset()*1e3)%864e5-(o-60*o.getTimezoneOffset()*1e3)%864e5:"account"===a?e.account.localeCompare(t.account)||(n-60*n.getTimezoneOffset()*1e3)%864e5-(o-60*o.getTimezoneOffset()*1e3)%864e5:"location"===a?e.location.localeCompare(t.location)||(n-60*n.getTimezoneOffset()*1e3)%864e5-(o-60*o.getTimezoneOffset()*1e3)%864e5:"type"===a&&e.type.localeCompare(t.type)||(n-60*n.getTimezoneOffset()*1e3)%864e5-(o-60*o.getTimezoneOffset()*1e3)%864e5}));this.setState({filtered_data:o,method:t})}else if("account"===t){o=n.sort((function(e,t){if("time"===a)var n=new Date(Date.parse(e.date)),o=new Date(Date.parse(t.date));return"amount"===a?t.amount-e.amount||e.account.localeCompare(t.account):"time"===a?(n-60*n.getTimezoneOffset()*1e3)%864e5-(o-60*o.getTimezoneOffset()*1e3)%864e5||e.account.localeCompare(t.account):"date"===a?Date.parse(t.date)-Date.parse(e.date)||e.account.localeCompare(t.account):"location"===a?e.location.localeCompare(t.location)||e.account.localeCompare(t.account):"type"===a&&e.type.localeCompare(t.type)||e.account.localeCompare(t.account)}));this.setState({filtered_data:o,method:t})}else if("location"===t){o=n.sort((function(e,t){if("time"===a)var n=new Date(Date.parse(e.date)),o=new Date(Date.parse(t.date));return"amount"===a?t.amount-e.amount||e.location.localeCompare(t.location):"time"===a?(n-60*n.getTimezoneOffset()*1e3)%864e5-(o-60*o.getTimezoneOffset()*1e3)%864e5||e.location.localeCompare(t.location):"date"===a?Date.parse(t.date)-Date.parse(e.date)||e.account.localeCompare(t.account):"account"===a?e.account.localeCompare(t.account)||e.location.localeCompare(t.location):"type"===a&&e.type.localeCompare(t.type)||e.location.localeCompare(t.location)}));this.setState({filtered_data:o,method:t})}else if("type"===t){o=n.sort((function(e,t){if("time"===a)var n=new Date(Date.parse(e.date)),o=new Date(Date.parse(t.date));return"amount"===a?t.amount-e.amount||e.type.localeCompare(t.type):"time"===a?(n-60*n.getTimezoneOffset()*1e3)%864e5-(o-60*o.getTimezoneOffset()*1e3)%864e5||e.type.localeCompare(t.type):"date"===a?Date.parse(t.date)-Date.parse(e.date)||e.type.localeCompare(t.type):"location"===a?e.location.localeCompare(t.location)||e.type.localeCompare(t.type):"account"===a&&e.account.localeCompare(t.account)||e.type.localeCompare(t.type)}));this.setState({filtered_data:o,method:t})}console.log("primary parameter",a)}},{key:"onLocationFilterChange",value:function(e){var t=this.state.filter;t.location=e.target.value,this.setState({filter:t})}},{key:"applyFilter",value:function(e){var t=this;if(console.log("applying filter",this.state.filter),this.state.filter.location)if("bb_all_locations"===this.state.filter.location)this.setState({filtered_data:this.state.data});else{var a=this.state.data.filter((function(e){return e.location===t.state.filter.location}));this.setState({filtered_data:a})}}},{key:"daysLeft",value:function(){var e=new Date,t=new Date(2022,5,11);return Math.floor((t-e)/864e5)}},{key:"spentTodayDining",value:function(){if(this.state.data.length){var e=new Date;e.setHours(0,0,0,0);var t=new Date;return t.setHours(23,59,59,999),+this.state.data.filter((function(a){return"debit"===a.type.toLowerCase()&&"dining dollars"===a.account.toLowerCase()&&new Date(a.date).valueOf()>e.valueOf()&&new Date(a.date).valueOf()<t.valueOf()})).reduce((function(e,t){return e+t.amount}),0).toFixed(2)}}},{key:"render",value:function(){var e=this,t=this.state.filtered_data;return Object(p.jsxs)("div",{id:"main",children:[Object(p.jsxs)("section",{children:[Object(p.jsxs)("h1",{id:"title",children:["Budget Buddy Analyzer",this.state.debug?" Debug Mode":""]}),Object(p.jsx)("p",{children:"Ctrl + Click on a header field to set it as the primary sort parameter."}),Object(p.jsxs)("div",{className:"options",children:[Object(p.jsxs)("select",{className:"option",value:this.state.filter.location,onChange:this.onLocationFilterChange,children:[Object(p.jsx)("option",{value:"",disabled:!0,children:"Select Location"},"bb_default"),Object(p.jsx)("option",{value:"bb_all_locations",children:"All Locations"},"bb_all_locations"),this.state.locations.map((function(e){return Object(p.jsx)("option",{value:e,children:e},e)}))]}),Object(p.jsx)("button",{className:"option",onClick:this.applyFilter,children:"Filter"})]}),Object(p.jsx)("div",{className:"table_container",children:Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{className:"table_header",children:[Object(p.jsx)("th",{className:"location"===this.state.method&&"location"===this.state.primary_param?"selected primary":"location"===this.state.primary_param?"primary":"location"===this.state.method?"selected":null,onClick:function(t){return e.sortBy(t,"location")},children:"Location"}),Object(p.jsx)("th",{className:"amount"===this.state.method&&"amount"===this.state.primary_param?"selected primary":"amount"===this.state.primary_param?"primary":"amount"===this.state.method?"selected":null,onClick:function(t){return e.sortBy(t,"amount")},children:"Amount"}),Object(p.jsx)("th",{className:"account"===this.state.method&&"account"===this.state.primary_param?"selected primary":"account"===this.state.primary_param?"primary":"account"===this.state.method?"selected":null,onClick:function(t){return e.sortBy(t,"account")},children:"Account"}),Object(p.jsx)("th",{className:"date"===this.state.method&&"date"===this.state.primary_param?"selected primary":"date"===this.state.primary_param?"primary":"date"===this.state.method?"selected":null,onClick:function(t){return e.sortBy(t,"date")},children:"Date"}),Object(p.jsx)("th",{className:("date"===this.state.method&&"date"===this.state.primary_param?"selected primary":"date"===this.state.primary_param?"primary":"date"===this.state.method?"selected":null)||("time"===this.state.method&&"time"===this.state.primary_param?"selected primary":"time"===this.state.primary_param?"primary":"time"===this.state.method?"selected":null),onClick:function(t){return e.sortBy(t,"time")},children:"Time"}),Object(p.jsx)("th",{className:"type"===this.state.method&&"type"===this.state.primary_param?"selected primary":"type"===this.state.primary_param?"primary":"type"===this.state.method?"selected":null,onClick:function(t){return e.sortBy(t,"type")},children:"Type"})]})}),Object(p.jsx)("tbody",{children:this.state.filtered_data.map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e.location}),Object(p.jsxs)("td",{children:["$",e.amount]}),Object(p.jsx)("td",{children:e.account}),Object(p.jsx)("td",{children:new Date(Date.parse(e.date)).toLocaleDateString()}),Object(p.jsx)("td",{children:new Date(Date.parse(e.date)).toLocaleTimeString()}),Object(p.jsx)("td",{children:e.type})]},e.id)}))})]})}),Object(p.jsx)("div",{className:"totals_table",children:Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Total"}),Object(p.jsx)("th",{children:"Dining Dollars"}),Object(p.jsx)("th",{children:"Triton Cash"})]})}),Object(p.jsx)("tbody",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{}),Object(p.jsxs)("td",{children:["$",t.filter((function(e){return"credit"===e.type.toLowerCase()&&"dining dollars"===e.account.toLowerCase()})).reduce((function(e,t){return e+t.amount}),0)-t.filter((function(e){return"debit"===e.type.toLowerCase()&&"dining dollars"===e.account.toLowerCase()})).reduce((function(e,t){return+(e+t.amount).toFixed(2)}),0)]}),Object(p.jsxs)("td",{children:["$",t.filter((function(e){return"credit"===e.type.toLowerCase()&&"triton cash"===e.account.toLowerCase()})).reduce((function(e,t){return e+t.amount}),0)-t.filter((function(e){return"debit"===e.type.toLowerCase()&&"triton cash"===e.account.toLowerCase()})).reduce((function(e,t){return+(e+t.amount).toFixed(2)}),0)]})]})})]})}),Object(p.jsxs)("div",{className:"footer",children:[Object(p.jsxs)("p",{children:["Last Update: ",this.state.last_update]}),Object(p.jsxs)("p",{children:[this.state.filtered_data.length," ",1!==this.state.filtered_data.length?"Transactions":"Transaction"]})]})]}),Object(p.jsx)("hr",{}),Object(p.jsx)("section",{children:Object(p.jsxs)("table",{className:"balance",children:[Object(p.jsx)("thead",{className:"balance_header",children:Object(p.jsx)("th",{children:"Dining Dollars"})}),Object(p.jsxs)("tbody",{className:"balance_body",children:[Object(p.jsx)("tr",{children:Object(p.jsx)("td",{children:"Balance"})}),Object(p.jsx)("tr",{id:"dining_dollars",children:Object(p.jsxs)("td",{children:["$",this.state.dining_dollars]})}),Object(p.jsx)("tr",{children:Object(p.jsx)("td",{children:"Days Left"})}),Object(p.jsx)("tr",{id:"dining_dollars",children:Object(p.jsx)("td",{children:this.daysLeft()})}),Object(p.jsx)("tr",{children:Object(p.jsx)("td",{children:"Money/Day"})}),Object(p.jsx)("tr",{id:"dining_dollars",children:Object(p.jsxs)("td",{children:["$",+(this.state.dining_dollars/this.daysLeft()).toFixed(2)]})}),Object(p.jsx)("tr",{children:Object(p.jsx)("td",{children:"Spent Today"})}),Object(p.jsx)("tr",{id:"dining_dollars",children:Object(p.jsxs)("td",{children:["$",this.spentTodayDining()]})})]})]})})]})}}]),a}(o.a.Component),f=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,18)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),o(e),i(e),r(e)}))};r.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(h,{})}),document.getElementById("root")),f()}},[[17,1,2]]]);
//# sourceMappingURL=main.b5c9a7e0.chunk.js.map